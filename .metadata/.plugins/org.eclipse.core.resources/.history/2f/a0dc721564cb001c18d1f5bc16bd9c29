package com.lms.accesslibrary.entity.library.book;

import java.util.Date;

import javax.persistence.Entity;
import javax.persistence.Table;

import com.lms.accesslibrary.bo.BookLending;
import com.lms.accesslibrary.entity.library.section.Rack;
import com.lms.accesslibrary.enums.BookFormat;
import com.lms.accesslibrary.enums.BookStatus;

import lombok.Getter;
import lombok.Setter;

@Entity
@Table(name="bookitem")
@Getter
@Setter
public class BookItem extends Book {

	private String barcode;
	private boolean isReferenceOnly;
	private Date borrowed;
	private Date dueDate;
	private double price;
	private BookFormat format;
	private BookStatus status;
	private Date dateOfPurchase;
	private Date publicationDate;
	private Rack placedAt;
	
	public boolean checkout(String memberId) {
	    if(this.isReferenceOnly) {
	      System.out.println("This book is Reference only and can't be issued");
	      return false;
	    }
	    if(!BookLending.lendBook(this.getBarcode(), memberId)){
	      return false;
	    }
	    this.setStatus(BookStatus.LOANED);
	    return true;
	  }

}
