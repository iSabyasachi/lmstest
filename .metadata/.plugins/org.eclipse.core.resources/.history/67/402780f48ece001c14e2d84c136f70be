package com.lms.accesslibrary.bo;

import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.stereotype.Component;

import com.lms.accesslibrary.dao.BookItemRepository;
import com.lms.accesslibrary.entity.library.book.BookItem;
import com.lms.accesslibrary.enums.BookStatus;

@Component
public class BookItemBO {
	@Autowired
	BookItemRepository bookItemRepository;
	
	public BookItem findByBarcode(String barcode) {
		return bookItemRepository.findByBarcode(barcode);
	};
	
	public boolean checkout(long userId) {
	    if(this.isReferenceOnly()) {
	      System.out.println("This book is Reference only and can't be issued");
	      return false;
	    }
	    if(!BookLending.lendBook(this.getBarcode(), userId)){
	      return false;
	    }
	    this.setStatus(BookStatus.LOANED.name());
	    return true;
	  }
	public void save() {
		// TODO 
		
	}
}
